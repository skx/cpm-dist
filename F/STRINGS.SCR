\ Strings - Information                                 971228esA sample string handling package (based on the Ralph Deane      article in Dr. Dobbs Journal #50).  Functions include -                                                                         STRING      create a string variable                            MLEN        return the maximum length of a string variable      S!          store a string into the string variable                                                                             The following functions operate on any string that returns      an address and count (including STRING variables).                                                                              LEN         return the length of a string                       MID$        return the substring                                LEFT$       return the left-most substring                      RIGHT$      return the right-most substring                     S+          concatenate two strings                             \ Strings - Load screen                                 971228esFORTH DEFINITIONS  DECIMAL                                      APPLICATION                                                                                                                     0 WARNING !  ( disable warning messages )                                                                                       CR .( loading Strings )   2 4 THRU                                                                                              1 WARNING !                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \ Strings - STRING MLEN S!                              971228es\ Create a string variable of max length u (255 max).  When     \ executing get the address and length of the current string.   : STRING                                                          CREATE  ( u -- )                                                  255 MIN  1 MAX  DUP C,  0 C,  ALLOT                           DOES>  ( -- sadr slen )                                           1+ COUNT ;                                                                                                                  \ Return the maximum length of the string variable              : MLEN  ( sadr slen -- u )                                        DROP  2- C@ ;                                                                                                                 \ Store the string c-addr u into the string variable sadr slen  : S!  ( c-addr u sadr slen -- )                                   OVER >R  MLEN MIN  R> 1-  PLACE ;                             \ Strings - LEN MID$ LEFT$ RIGHT$                       971228es\ Return the string length                                      : LEN  ( c-addr u -- u )                                          SWAP DROP ;                                                                                                                   \ Return u2 characters from the string starting at offset n     : MID$  ( c-addr1 u1 n u2 -- c-addr2 u3 )                         >R  0 MAX  /STRING  R> MIN ;                                                                                                  \ Return u2 left-most characters from the string                : LEFT$  ( c-addr1 u1 u2 -- c-addr2 u3 )                          0 SWAP  MID$ ;                                                                                                                \ Return u2 right-most characters from the string               : RIGHT$  ( c-addr1 u1 u2 -- c-addr2 u3 )                         2DUP -  SWAP  MID$ ;                                          \ Strings - S+                                          971228esHERE  255 ALLOT  ( temporary string buffer )                                                                                    \ Concatenate two strings placing result in a temporary buffer  : S+  ( c-addr1 u1 c-addr2 u2 -- c-addr3 u3 )                     2SWAP  255 MIN  0 MAX  >R  [ DUP ] LITERAL  R@ CMOVE            [ DUP ] LITERAL  R>  2SWAP 2OVER  255 SWAP  /STRING             ROT MIN  0 MAX  DUP >R  CMOVE  R> + ;                                                                                         DROP                                                                                                                                                                                                                                                                                                                                                                                                                                                            